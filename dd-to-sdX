dding should not be scripted do to danger. 
in general, the target block device should not be mounted. This ensures the target  ends up with the partitions and etc as intended. 
dd command something like this:
dd if=$img of=/dev/sdb bs=32MB

